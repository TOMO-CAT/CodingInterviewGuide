# MySQL 存储引擎

mysql5.5 版本前默认使用 MyISAM 引擎，5.5 之后默认使用 innodb 引擎。

## MYISAM 存储引擎

MYISAM 存储引擎中一张表包含三个文件：

* `.frm`文件：表定义
* `.myd`：数据文件
* `myi`：索引文件

在 MYISAM 中主键索引和辅助索引没有主次之分，如下图所示 ID 索引和 Name 索引查找数据的方式是一样的：

![image-20211218192408453](image/image-20211218192408453.png)

## Innodb 存储引擎

Innodb 存储引擎中一张表包含两个文件：

* `.frm`文件：表定义
* `.ibd`文件：数据和索引文件

在 Innode 存储引擎中，主键索引为聚焦索引（数据库表中数据的物理顺序和键值的逻辑顺序相同），如下图为例辅助索引叶子节点数据区保存的是主键索引的关键字，因此使用辅助索引时需要先通过辅助索引找到主键索引的关键字，然后再检索一次主键索引找到数据：

![image-20211218193527435](image/image-20211218193527435.png)

## 使用 Innodb 作为默认存储引擎的原因

MyISAM 存储引擎在主键索引和辅助索引的叶子结点都存放数据行指针，一旦发生数据变更就需要重新维护所有的索引。
