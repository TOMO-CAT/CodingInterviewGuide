# 查询文件中出现次数最多的前 10 个 IP

## 问题描述

文件中每行是一个 IP，需要查出出现次数最多的前 10 个 IP。

## sort 命令

### 1. 用途

将输入文件的内容排序后输出，没有输入文件时将读取标准输入。

### 2. 参数

| 参数                      | 含义                  |
| ------------------------- | --------------------- |
| -n, --numeric-sort        | 根据数字排序          |
| -r, --reverse             | 降序排序              |
| -t, --field-separator=SEP | 使用 SEP 作为列的分隔符 |

## 答案

思路如下：

* `sort`：对数据进行排序，使得相同的 IP 彼此相邻
* `uniq -c`：对 IP 去重并统计每个 IP 重复次数
* `sort -nrt`：按照重复次数降序排列
* `head -10`显示前 10 行

```bash
$cat a.txt | sort | uniq -c | sort -nrt " " | awk -F " " '{print $2}' | head -10
```

## 例子

我们用数字代替 IP，假设`a.txt`中每行都是一个数字：

```
123
111
123
1
1111111
1
11
1
1
12
123
123
123
123
123
444
3
444
3333
```

按照出现次数降序排列：

```bash
$cat a.txt | sort | uniq -c | sort -nrt " "
      7 123
      4 1
      2 444
      1 3333
      1 3
      1 12
      1 1111111
      1 111
      1 11
```
