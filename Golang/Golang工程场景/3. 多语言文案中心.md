# 多语言文案中心

## 设计思想

### 1. 文案文件组织格式

* 有多个文件夹，每个文件夹表示一个服务。
* 一个文件夹下有多份文件，每份文件表示一个语种，例如`en_br.json`

### 2. 提供接口

* `Start()`：初始化从硬盘加载文案到内存中，启动异步线程定时轮询
* `GetText()`：获取文案
* `GetTextWithParam()`：提供文案的参数配置和渲染功能

## 设计细节

### 1. 文案 Json 热更新

* golang SDK 使用`atomic.Value`，C++使用`boost::shared_ptr`和`atomic.load()`实现
* 文案参数配置功能：使用`{{}}`占位符设置参数
* 文案格式渲染：使用 pango2 进行文案渲染，可以设置每种格式的渲染逻辑，比如`int`、`percent`等，配置在文案中

## 收益

* 快速接入：提供 Json，再接入 SDK 即可
* 快速新增语种
* 监控报警收敛到 SDK 中，通过配置打开
* 解耦多语言和代码逻辑，降低维护文案的心智成本
