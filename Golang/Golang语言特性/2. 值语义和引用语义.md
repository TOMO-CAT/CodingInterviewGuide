# 值语义和引用语义

## 定义

看一下下面这个简单的例子：

```
var1 = var2
var1.Modify()  // 修改 var1
```

如果修改`var1`不会影响`var2`的值，那么属于值类型。如果会影响`var2`的值，那么就是引用类型。

## Go 值类型

Go 语言中大多数类型都是基于值语义，包括基本类型和复合类型：

- 基本类型：`byte`、`int`、`bool`、`float32`、`float64`和`string`等
- 复合类型：数组`array`、结构体`struct`和指针`pointer`

> 其他语言如 C 语言中数组比较特别，通过函数传递一个数组的时候基于引用语义，但是在结构体中定义数组变量的时候基于值语义（表现在为结构体赋值的时候，该数组会被完整地复制）

Go 语言中的数组类型是很纯粹的值类型，如果想表达引用，需要用指针。

```
func main() {
 // 值传递: 修改 arr2 不会影响 arr1
 arr1 := [3]int{11, 22, 33}
 arr2 := arr1
 arr1[0] = 9999
 fmt.Println(arr1, arr2)

 // 引用传递: 修改 arr4 也会影响 arr3
 arr3 := [4]int{1, 2, 3, 4}
 arr4 := &arr3
 arr4[0] = 9999
 fmt.Println(arr3, arr4)

 return
}

// 输出
[9999 22 33] [11 22 33]
[9999 2 3 4] &[9999 2 3 4]
```

## Go 引用类型

Go 语言中有 4 个类型比较特殊，看起来像是引用类型：

- slice
- map
- channel
- interface

> 这些类型之所以具备引用语义，是因为它们内部都维护了一个或者多个指针，我们依然可以把 Go 语言类型看成是值语义的。
