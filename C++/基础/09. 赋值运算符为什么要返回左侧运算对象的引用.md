# 赋值运算符为什么要返回左侧运算对象的引用

## 答案

内置类型和标准库类型都支持“连锁赋值”的性质，因此用户自定义类型最好也遵循这一规定，而实现这一性质的方法正是返回左侧运算对象的引用。

## 解析

C++ 中存在“连锁赋值”的特性：

```c++
int  x, y, z;
x = y = z = 15;  // 连锁赋值, 等价于 x = (y = (z = 15))
```

为了实现“连锁赋值”，赋值操作符必须返回一个左侧运算对象的引用：

```c++
class Foo {
 public:
    ...
};

Foo& operator=(const Foo& rhs) {  // 返回类型是一个当前对象类型的 reference
    ...
    return *this;  // 返回左侧对象
}
```

这些协议不仅适用于以上的标准赋值形式 `=`，也适用于所有赋值相关运算，比如 `+=`、`-=` 和 `*=` 等。

另外需要注意的是这只是一个约定俗成的标准而不具有强制性。如果不遵循它代码一样可以通过编译。然而这份协议被所有内置类型和标准库提供的类型共同遵守。因此除非你有一个标新立异的好理由，不然还是随众吧。
