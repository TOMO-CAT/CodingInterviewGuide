# C++11 新特性：智能指针

## 1. 为什么要使用智能指针

C++ 中动态内存的管理是通过一对运算符来完成的：

* `new`：在动态内存中为对象分配空间并返回一个指向该对象的指针
* `delete`：接受一个动态对象的指针，销毁该对象并释放与之关联的内存空间

这种程序员手动管理内存的方式存在两种问题：

* 如果我们忘记释放内存，就会造成内存泄漏
* 如果在有指针引用内存的情况下我们就释放下，就会出现“野指针”

使用指针指针管理动态内存可以很大程序避免上述提到的两个问题（因为指针指针就是一个类，当超出类的作用域时就会自动调用类的析构函数自动释放资源）。

## 2. 智能指针的类别

> 注意 C++11 已经弃用了`auto_ptr`。

C++ 标准库提供了三种智能指针：

* `shared_ptr`：允许多个指针指向同个对象
* `unique_ptr`：“独占”所指向的对象
* `weak_ptr`：弱引用，指向`shared_ptr`所管理的对象

## 3. 具体细节

[智能指针](https://cpp-note.readthedocs.io/zh/latest/docs/%E7%AC%AC11%E7%AB%A0%20C%2B%2B11%E6%96%B0%E6%A0%87%E5%87%86/11.3%20%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88.html)
